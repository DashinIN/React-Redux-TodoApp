{"version":3,"sources":["components/TodoItem.module.scss","components/AddTodoForm.module.scss","components/TodoList.module.scss","redux/todoSlice.js","components/AddTodoForm.js","components/TodoItem.js","components/TodoList.js","components/TotalCompleteItems.js","App.js","redux/store.js","index.js"],"names":["module","exports","getTodosAsync","createAsyncThunk","_","a","rejectWithValue","fetch","response","ok","Error","json","todos","message","deleteTodoAsync","id","dispatch","method","console","log","deleteTodo","toggleCompleteAsync","getState","todo","find","headers","body","JSON","stringify","completed","toggleComplete","addTodoAsync","text","title","userID","data","addTodo","setError","state","action","status","error","payload","setLoading","todoSlice","createSlice","name","initialState","reducers","Date","now","push","toggledTodo","filter","extraReducers","pending","fulfilled","rejected","actions","AddTodoForm","useState","value","setValue","useDispatch","onSubmit","event","preventDefault","window","scrollTo","document","scrollHeight","className","s","form__add","type","form__input","placeholder","onChange","target","btn","TodoItem","item","item__content","done","check","checked","onClick","TodoList","React","useEffect","useSelector","list__group","TransitionGroup","map","CSSTransition","timeout","classNames","TotalCompleteItems","completedTodos","length","App","style","cursor","configureStore","reducer","todoReducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.932dc7f6.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"TodoItem_item__3NgVm\",\"item__content\":\"TodoItem_item__content__JOWqR\",\"check\":\"TodoItem_check__2svq0\",\"title\":\"TodoItem_title__1WVDk\",\"done\":\"TodoItem_done__33BrM\",\"btn\":\"TodoItem_btn__1BC1Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form__add\":\"AddTodoForm_form__add__17F4j\",\"form__input\":\"AddTodoForm_form__input__3ZHCM\",\"btn\":\"AddTodoForm_btn__1XZnP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list__group\":\"TodoList_list__group__2n_yj\"};","import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\n\r\n\r\n\r\nexport const getTodosAsync = createAsyncThunk(\r\n    'todos/getTodosAsync',\r\n    async (_, {rejectWithValue}) => {\r\n        try {\r\n            const response = await fetch(\"https://jsonplaceholder.typicode.com/todos?_limit=5\");\r\n            if (!response.ok) {\r\n                throw new Error(\"server error\");\r\n            }\r\n            const todos = await response.json();\r\n            return todos;\r\n\r\n        } catch(error) {\r\n            return rejectWithValue(error.message);\r\n        }\r\n       \r\n    }  \r\n);\r\n\r\n\r\n\r\nexport const deleteTodoAsync = createAsyncThunk(\r\n    \"todos/deleteTodoAsync\",\r\n    async (id, {rejectWithValue, dispatch}) => {\r\n        try {\r\n            const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {\r\n                method: 'DELETE',\r\n            });\r\n            console.log(response);\r\n            if (!response.ok) {\r\n                throw new Error(\"can't delete\");\r\n            }\r\n\r\n            dispatch(deleteTodo({id}));\r\n\r\n        } catch(error) {\r\n            console.log(error.message);\r\n            return rejectWithValue(error.message);\r\n           \r\n        }\r\n    }\r\n);\r\n\r\nexport const toggleCompleteAsync = createAsyncThunk(\r\n    \"todos/toggleCompleteAsync\",\r\n    async (id, {rejectWithValue, dispatch, getState}) => {\r\n\r\n        const todo = getState().todos.todos.find(todo => todo.id === id);\r\n\r\n        try {\r\n            const response = await fetch(`https://jsonplaceholder.typicode.com/todos/${id}`, {\r\n                method: 'PATCH',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    completed: !todo.completed\r\n                })\r\n            });\r\n            console.log(response);\r\n            if (!response.ok) {\r\n                throw new Error(\"can't toggle\");\r\n            }\r\n\r\n            dispatch(toggleComplete({id}))\r\n\r\n        } catch(error) {\r\n            \r\n            return rejectWithValue(error.message);\r\n           \r\n        }\r\n    }\r\n);\r\n\r\nexport const addTodoAsync = createAsyncThunk(\r\n    'todos/addTodoAsync',\r\n    async function(text, {rejectWithValue, dispatch}) {\r\n        try {\r\n            const todo = {\r\n                title: text,\r\n                userID: 1,\r\n                completed: false,\r\n            };\r\n            const response = await fetch(\"https://jsonplaceholder.typicode.com/todos\", {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify(todo)\r\n            });\r\n\r\n            if(!response.ok) {\r\n                throw new Error('cant add');\r\n            }\r\n            const data = await response.json();\r\n            dispatch(addTodo(data))\r\n        } catch (error) {\r\n            return rejectWithValue(error.message);\r\n        }\r\n    }\r\n);\r\n\r\nconst setError = (state, action) => {\r\n    state.status=\"rejected\";\r\n    state.error=action.payload;\r\n}\r\n\r\nconst setLoading = (state, action) => {\r\n    state.status=\"loading\";\r\n    state.error=null;\r\n}\r\n\r\nconst setDone = (state, action) => {\r\n    state.status=\"resolved\";\r\n    state.error=null;\r\n}\r\n\r\n\r\nconst todoSlice = createSlice({\r\n    name: \"todos\",\r\n    initialState: {\r\n        todos: [],\r\n        status: null,\r\n        error: null,\r\n},\r\n    reducers: {\r\n        addTodo(state, action)  {\r\n            const todo = {\r\n                id: Date.now(),\r\n                title: action.payload.title,\r\n                \r\n            }\r\n            state.todos.push(todo);\r\n        },\r\n        toggleComplete(state, action)  {\r\n            const toggledTodo = state.todos.find(\r\n                (todo) => todo.id === action.payload.id\r\n            );\r\n            toggledTodo.completed = !toggledTodo.completed;\r\n        },\r\n        deleteTodo(state, action)  {\r\n           state.todos = state.todos.filter(todo => todo.id !== action.payload.id);\r\n        }\r\n    },\r\n    extraReducers: {\r\n        [getTodosAsync.pending]: setLoading,\r\n        [getTodosAsync.fulfilled]: (state, action) => {\r\n            state.status=\"resolved\";\r\n            state.todos=action.payload;\r\n            \r\n        },\r\n        [addTodoAsync.pending]: setLoading,\r\n        [addTodoAsync.fulfilled]: setDone,\r\n\r\n        [getTodosAsync.rejected]: setError,\r\n        [deleteTodoAsync.rejected]: setError,\r\n        [toggleCompleteAsync.rejected]: setError,\r\n       \r\n    },\r\n});\r\n\r\nexport const {\r\n    addTodo, \r\n    toggleComplete,\r\n    deleteTodo,\r\n} = todoSlice.actions;\r\n\r\nexport default todoSlice.reducer;","import React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { addTodoAsync } from '../redux/todoSlice';\r\nimport s from \"./AddTodoForm.module.scss\"\r\n\r\nconst AddTodoForm = () => {\r\n\tconst [value, setValue] = useState('');\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst onSubmit = (event) => {\r\n\t\tevent.preventDefault();\r\n\t\tif(value!=\"\"){\r\n\t\t\tdispatch(addTodoAsync(value));\r\n\t\t\tsetValue(\"\");\r\n\t\t}\r\n\t\twindow.scrollTo(0, (document.body.scrollHeight));\r\n\t};\r\n\r\n\treturn (\r\n\t\t<form onSubmit={onSubmit} className={s.form__add}>\r\n\t\t\t<input\r\n\t\t\t\ttype='text'\r\n\t\t\t\tclassName={s.form__input}\r\n\t\t\t\tplaceholder='Добавить дело...'\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={(event) => setValue(event.target.value)}\r\n\t\t\t></input>\r\n\r\n\t\t\t<button type='submit' className={s.btn}>\r\n\t\t\t\tДобавить\r\n\t\t\t</button>\r\n\t\t</form>\r\n\t);\r\n};\r\n\r\nexport default AddTodoForm;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { deleteTodoAsync, toggleCompleteAsync } from '../redux/todoSlice';\r\nimport s from \"./TodoItem.module.scss\"\r\n\r\n\r\n\r\nconst TodoItem = ({ id, title, completed }) => {\r\n\t\r\n\tconst dispatch = useDispatch();\r\n\r\n\treturn (\r\n\t\t<li className={s.item}>\r\n\t\t\t\r\n\t\t\t\t<div className={`${s.item__content} ${completed && s.done}`} >\r\n\t\t\t\t\t<input type='checkbox' className={s.check} checked={completed}\r\n\t\t\t\t\tonChange={() => dispatch(toggleCompleteAsync(id))}></input>\r\n\t\t\t\t\t<div className={s.title}>{title}</div>\r\n\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t<button className={s.btn}  onClick={ () => dispatch(deleteTodoAsync(id)) } >Delete</button>\r\n\t\t\t\r\n\t\t</li>\r\n\t);\r\n};\r\n\r\nexport default TodoItem;\r\n","import React from 'react';\r\nimport TodoItem from './TodoItem';\r\n\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { getTodosAsync } from '../redux/todoSlice';\r\n\r\n\r\nimport {\r\n\tCSSTransition,\r\n\tTransitionGroup,\r\n  } from 'react-transition-group';\r\nimport s from \"./TodoList.module.scss\"\r\n\r\nconst TodoList = () => {\r\n\t\r\n\tconst dispatch = useDispatch();\r\n\r\n\r\n\tReact.useEffect(() => {\r\n\t\tdispatch(getTodosAsync())\r\n\t}, [dispatch]);\r\n\r\n\tconst todos = useSelector(state => state.todos.todos);\r\n\r\n\r\n\treturn (\r\n\t\t<ul className={s.list__group}>\r\n\t\t\t<TransitionGroup className=\"todo-list\">\r\n\t\t\t{todos.map((todo) => (\r\n\t\t\t\t<CSSTransition\r\n\t\t\t\tkey={todo.id}\r\n\t\t\t\ttimeout={200}\r\n\t\t\t\tclassNames=\"item\"> \r\n\t\t\t\t\t<TodoItem id={todo.id} title={todo.title} completed={todo.completed} />\r\n\t\t\t\t</CSSTransition>\r\n\t\t\t))}\r\n\t\t\t</TransitionGroup>\r\n\t\t</ul>\r\n\t);\r\n};\t\t\r\n\r\nexport default TodoList;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst TotalCompleteItems = () => {\r\n\tconst completedTodos = useSelector(\r\n\t\t(state) => state.todos.todos.filter(\r\n\t\t\t(todo) => todo.completed === true\r\n\t\t\t)\r\n\t);\r\n\treturn <h4 >Выполненные пункты: {completedTodos.length}</h4>;\r\n};\r\n\r\nexport default TotalCompleteItems;\r\n","import React from 'react';\r\nimport \"./app.scss\"\r\nimport AddTodoForm from './components/AddTodoForm';\r\nimport TodoList from './components/TodoList';\r\nimport TotalCompleteItems from './components/TotalCompleteItems';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst App = () => {\r\n\r\n\tconst {status, error} = useSelector(state => state.todos);\r\n\r\n\tReact.useEffect(() => {\r\n\t\tif (status === \"loading\") {\r\n\t\t\tdocument.body.style.cursor=\"wait\";\r\n\t\t}\r\n\t\telse document.body.style.cursor=\"auto\";\r\n\t}, [status]\r\n\r\n\t);\r\n\r\n\r\n\treturn (\r\n\t\t<div className=\"wrapper\">\r\n\t\t\t<h1>My Todo List</h1>\r\n\t\t\t<AddTodoForm />\r\n\t\t\t{error && <h2>Ошибка {error}</h2>}\r\n\t\t\t\r\n\t\t\t<TodoList />\r\n\t\t\t<TotalCompleteItems />\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","import { configureStore } from \"@reduxjs/toolkit\";\r\nimport todoReducer from \"./todoSlice\";\r\n\r\nexport default configureStore({\r\n    reducer: {\r\n        todos: todoReducer,\r\n\r\n    },\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\n\r\nimport store from \"./redux/store\"\r\nimport {Provider} from \"react-redux\"\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<Provider store = {store}>\r\n\t\t\t<App />\r\n\t\t</Provider>\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}